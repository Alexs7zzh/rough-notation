const t="http://www.w3.org/2000/svg";function s(t,s,o,e,n){const i=()=>(2**31-1&(n.seed=Math.imul(48271,n.seed)))/2**31,h=(t,s=1)=>n.roughness*s*(i()*t*2-t),r=Math.pow(t-o,2)+Math.pow(s-e,2),c=Math.sqrt(r);let a=1;a=c<200?1:c>500?.4:-.0016668*c+1.233334;let u=n.maxRandomnessOffset||0;u*u*100>r&&(u=c/10);const f=.2+.2*i();let d=n.bowing*n.maxRandomnessOffset*(e-s)/200,l=n.bowing*n.maxRandomnessOffset*(t-o)/200;d=h(d,a),l=h(l,a);const w=[],m=()=>h(u,a);return w.push({op:"move",data:[t+h(u,a),s+h(u,a)]}),w.push({op:"bcurveTo",data:[d+t+(o-t)*f+m(),l+s+(e-s)*f+m(),d+t+2*(o-t)*f+m(),l+s+2*(e-s)*f+m(),o+m(),e+m()]}),w}function o(t,o,e,n,i){const h=[[t,o],[t+e,o],[t+e,o+n],[t,o+n]],r=h.length,c=[];for(let t=0;t<r-1;t++)c.push(...s(h[t][0],h[t][1],h[t+1][0],h[t+1][1],i));return c.push(...s(h[r-1][0],h[r-1][1],h[0][0],h[0][1],i)),c}function e(e,n,i,h,r,c){const a=[];let u=i.strokeWidth||2;const f=[5,5,5,5],d=void 0===i.animate||!!i.animate,l=function(t,s){return{maxRandomnessOffset:2,roughness:"underline"===t?2:1.5,bowing:1,strokeWidth:1.5,seed:s}}(i.type,c);switch(i.type){case"underline":{const t=n.y+n.h+f[2];a.push({type:"path",ops:s(n.x,t,n.x+n.w,t,l)});break}case"box":{const t=n.x-f[3],s=n.y-f[0],e=n.w+(f[1]+f[3]),i=n.h+(f[0]+f[2]);a.push({type:"path",ops:o(t,s,e,i,l)});break}}if(a.length){const s=function(t){const s=[];for(const o of t){let t="";for(const e of o.ops){const o=e.data;switch(e.op){case"move":t.trim()&&s.push(t.trim()),t=`M${o[0]} ${o[1]} `;break;case"bcurveTo":t+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `}}t.trim()&&s.push(t.trim())}return s}(a),o=[],n=[];let i=0;const c=(t,s,o)=>t.setAttribute(s,o);for(const h of s){const s=document.createElementNS(t,"path");if(c(s,"d",h),c(s,"fill","none"),c(s,"stroke","currentColor"),c(s,"stroke-width",`${u}`),d){const t=s.getTotalLength();o.push(t),i+=t}e.appendChild(s),n.push(s)}if(d){let t=0;for(let s=0;s<n.length;s++){const e=n[s],c=o[s],a=i?r*(c/i):0,u=h+t,f=e.style;f.strokeDashoffset=`${c}`,f.strokeDasharray=`${c}`,f.animation=`rough-notation-dash ${a}ms ease-out ${u}ms forwards`,t+=a}}}}for(var n,i=256,h=[];i--;)h[i]=(i+256).toString(16).substring(1);class r{constructor(t,s){this.t="unattached",this.o=[],this.i=t,this.u=s,this.attach()}get className(){return this.u.className?this.u.className:"rough-annotation"}attach(){if("unattached"===this.t&&this.i.parentElement){!function(){if(!window.__rno_kf_s){const t=window.__rno_kf_s=document.createElement("style");t.textContent="@keyframes rough-notation-dash { to { stroke-dashoffset: 0; } }",document.head.appendChild(t)}}();const s=this.l=document.createElementNS(t,"svg");s.setAttribute("class",this.className),this.u.commentId&&(s.dataset.forComment=this.u.commentId);const o=s.style;if(o.position="absolute",o.top="0",o.left="0",o.overflow="visible",o.pointerEvents="none",o.width="100px",o.height="100px",this.u.rootId){const t=document.getElementById(this.u.rootId);t?t.appendChild(s):this.i.parentElement.appendChild(s)}else this.i.parentElement.appendChild(s);this.t="not-showing"}}show(){switch(this.t){case"unattached":break;case"showing":this.hide(),this.l&&this.render(this.l,!0);break;case"not-showing":this.attach(),this.l&&this.render(this.l,!1)}}remove(){this.l&&this.l.parentElement&&this.l.parentElement.removeChild(this.l)}refresh(){this.haveRectsChanged()&&this.show()}hide(){if(this.l)for(;this.l.lastChild;)this.l.removeChild(this.l.lastChild);this.t="not-showing"}haveRectsChanged(){if(this.o.length){const t=this.rects();if(t.length!==this.o.length)return!0;for(let s=0;s<t.length;s++)if(!this.isSameRect(t[s],this.o[s]))return!0}return!1}isSameRect(t,s){const o=(t,s)=>Math.round(t)===Math.round(s);return o(t.x,s.x)&&o(t.y,s.y)&&o(t.w,s.w)&&o(t.h,s.h)}render(t,s){let o=this.u;s&&(o.animate=!1);const n=this.rects();let i=0;n.forEach((t=>i+=t.w));const h=o.animationDuration||800;let r=0;for(let s=0;s<n.length;s++){const c=h*(n[s].w/i);e(t,n[s],o,r,c,Math.floor(Math.random()*2**31)),r+=c}this.o=n,this.t="showing"}rects(){const t=[];if(this.l){const s=this.i.getClientRects();for(let o=0;o<s.length;o++)t.push(this.svgRect(this.l,s[o]))}return t}svgRect(t,s){const o=t.getBoundingClientRect(),e=s;return{x:(e.x||e.left)-(o.x||o.left),y:(e.y||e.top)-(o.y||o.top),w:e.width,h:e.height}}}class c{constructor(){this.m=new Map,this.g=new ResizeObserver(function(t,s=300){let o;return()=>{clearTimeout(o),o=setTimeout((()=>t()),s)}}((()=>{Array.from(this.m.values()).forEach((t=>t.refresh()))}))),this.g.observe(document.body)}add(t,s){const o=new r(t,s);o.show();const e=function(t){var s=0,o=t||11;if(!n||i+o>512)for(n="",i=0;s<256;s++)n+=h[256*Math.random()|0];return n.substring(i,i+++o)}(16);return this.m.set(e,o),e}remove(t){const s=this.m.get(t);s&&(s.remove(),this.m.delete(t))}}function a(){return new c}export{a as default,a as main};
